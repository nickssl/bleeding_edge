<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>projects/SPP/COMMON</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Thu Mar 18 18:15:52 2021.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>projects/SPP/COMMON</H1>
<LI><A HREF="#CDF_TOOLS__DEFINE[1]">CDF_TOOLS__DEFINE[1]</A>
<LI><A HREF="#CDF_TOOLS__DEFINE[2]">CDF_TOOLS__DEFINE[2]</A>
<br>Acts as a timestamp file to trigger the regeneration of SEP data products. Also provides Software Version info for the MAVEN SEP instrument.
<LI><A HREF="#CDF_TOOLS__DEFINE[2]">CDF_TOOLS__DEFINE[2]</A>
<LI><A HREF="#CDF_TOOLS_VARINFO__DEFINE">CDF_TOOLS_VARINFO__DEFINE</A>
<LI><A HREF="#DYNAMICARRAY__DEFINE">DYNAMICARRAY__DEFINE</A>
<LI><A HREF="#PSP_FLD_LOAD">PSP_FLD_LOAD</A>
<LI><A HREF="#SPP_DATA_PRODUCT__DEFINE">SPP_DATA_PRODUCT__DEFINE</A>
<LI><A HREF="#SPP_DATA_PRODUCT_HASH">SPP_DATA_PRODUCT_HASH</A>
<LI><A HREF="#SPP_FILE_RETRIEVE">SPP_FILE_RETRIEVE</A>
<LI><A HREF="#SPP_FLD_LOAD">SPP_FLD_LOAD</A>
<LI><A HREF="#SPP_GEN_APDAT__DEFINE[1]">SPP_GEN_APDAT__DEFINE[1]</A>
<LI><A HREF="#SPP_GEN_APDAT__DEFINE[2]">SPP_GEN_APDAT__DEFINE[2]</A>
<br>Acts as a timestamp file to trigger the regeneration of SEP data products. Also provides Software Version info for the MAVEN SEP instrument.
<LI><A HREF="#SPP_PTP_RECORDER">SPP_PTP_RECORDER</A>
<br>Widget tool that opens a socket and records streaming data from a server (host) and can save it to a file
<LI><A HREF="#SPP_SPC_MET_TO_UNIXTIME">SPP_SPC_MET_TO_UNIXTIME</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="CDF_TOOLS_VARINFO__DEFINE">
<H2>CDF_TOOLS_VARINFO__DEFINE</H2></A>
<A HREF="#CDF_TOOLS__DEFINE[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Written by Davin Larson October 2018
 $LastChangedBy: ali $
 $LastChangedDate: 2020-12-01 10:45:51 -0800 (Tue, 01 Dec 2020) $
 $LastChangedRevision: 29404 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/cdf_tools_varinfo__define.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/cdf_tools_varinfo__define.pro">projects/SPP/COMMON/cdf_tools_varinfo__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="CDF_TOOLS__DEFINE[1]">
<H2>CDF_TOOLS__DEFINE[1]</H2></A>
<A HREF="#CDF_TOOLS_VARINFO__DEFINE">[Previous Routine]</A>
<A HREF="#CDF_TOOLS__DEFINE[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Written by Davin Larson October 2018
  cdf_tools
  This basic object is the entry point for reading and writing cdf files
 $LastChangedBy: ali $
 $LastChangedDate: 2021-03-09 19:26:28 -0800 (Tue, 09 Mar 2021) $
 $LastChangedRevision: 29750 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/cdf_tools__define.pro $

</PRE><P>
<STRONG>(See <A href="COMMON/cdf_tools__define.pro">projects/SPP/COMMON/cdf_tools__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="CDF_TOOLS__DEFINE[2]">
<H2>CDF_TOOLS__DEFINE[2]</H2></A>
<A HREF="#CDF_TOOLS__DEFINE[1]">[Previous Routine]</A>
<A HREF="#CDF_TOOLS__DEFINE[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: SW_VERSION
Function:
PURPOSE:
 Acts as a timestamp file to trigger the regeneration of SEP data products. Also provides Software Version info for the MAVEN SEP instrument.
Author: Davin Larson  - January 2014
 $LastChangedBy: ali $
 $LastChangedDate: 2021-03-09 19:26:28 -0800 (Tue, 09 Mar 2021) $
 $LastChangedRevision: 29750 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/cdf_tools__define.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/cdf_tools__define.pro">projects/SPP/COMMON/cdf_tools__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="CDF_TOOLS__DEFINE[2]">
<H2>CDF_TOOLS__DEFINE[2]</H2></A>
<A HREF="#CDF_TOOLS__DEFINE[2]">[Previous Routine]</A>
<A HREF="#DYNAMICARRAY__DEFINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This is a wrapper routine to create CDF variables within an open CDF file.
 usage:
  CDF_VAR_ATT_CREATE,fileid,'RandomVariable',randomn(seed,3,1000),attributes = atts
  Attributes are contained in a orderedhash and should have already been created.
</PRE><P>
<STRONG>(See <A href="COMMON/cdf_tools__define.pro">projects/SPP/COMMON/cdf_tools__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="DYNAMICARRAY__DEFINE">
<H2>DYNAMICARRAY__DEFINE</H2></A>
<A HREF="#CDF_TOOLS__DEFINE[2]">[Previous Routine]</A>
<A HREF="#PSP_FLD_LOAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Purpose: Object that provides an efficient means of concatenating arrays
 da= DynamicArray([InitialArray][,name='name1')
 Purpose:  Returns a &quot;dynamic array&quot; object.  This dynamic array can have any number of elements and can be efficiently 
 appended to. 
 
 This routine is particularly useful when appending to large arrays on numerous occassions.  This is especially useful
 when the final size of the array is not known when first initialized.
 
 It is functionally equivalent to:
 a= findgen(10)
 b = 1.
 a = [a,b]
 but considerably more effiecient because the array size does not need to be increased at every append operation.
 
 Because one can produce arrays of objects, it is a conveniant way of constructing arrays of arrays
 containing different things.
 
 Works with multidimensional arrays too.
 
 USAGE:
   da = dynamicarray(findgen(1000000), name='Test1')
      Or 
   da.array = findgen(1000000)    ; equivalent
      Or
   da = dynamicarray()     &amp;   da.append, findgen(1000000)
   da.append,  findgen(1000)  ;  append some data
   da.append, !values.f_nan      ; add a NAN at the end.
   da.name = 'NewName'   ; change name
   
   a = da.array   ; retrieve a copy of the array
   print,da.size   ; print the number of elements in the array  (first dimension of multidimensional arrays)
   help,da.name   ; display the optional user name
   
   object_destroy, da   ; cleanup when done.
   
   Written by Davin Larson - August 2016
</PRE><P>
<STRONG>(See <A href="COMMON/dynamicarray__define.pro">projects/SPP/COMMON/dynamicarray__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PSP_FLD_LOAD">
<H2>PSP_FLD_LOAD</H2></A>
<A HREF="#DYNAMICARRAY__DEFINE">[Previous Routine]</A>
<A HREF="#SPP_DATA_PRODUCT_HASH">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2021-01-25 22:28:17 -0800 (Mon, 25 Jan 2021) $
 $LastChangedRevision: 29622 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/psp_fld_load.pro $

</PRE><P>
<STRONG>(See <A href="COMMON/psp_fld_load.pro">projects/SPP/COMMON/psp_fld_load.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_DATA_PRODUCT_HASH">
<H2>SPP_DATA_PRODUCT_HASH</H2></A>
<A HREF="#PSP_FLD_LOAD">[Previous Routine]</A>
<A HREF="#SPP_DATA_PRODUCT__DEFINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  spp_data_product_hash
  This basic object is the entry point for defining and obtaining all data for all data products
 $LastChangedBy: davin-mac $
 $LastChangedDate: 2020-04-20 12:02:46 -0700 (Mon, 20 Apr 2020) $
 $LastChangedRevision: 28594 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_data_product_hash.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/spp_data_product_hash.pro">projects/SPP/COMMON/spp_data_product_hash.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_DATA_PRODUCT__DEFINE">
<H2>SPP_DATA_PRODUCT__DEFINE</H2></A>
<A HREF="#SPP_DATA_PRODUCT_HASH">[Previous Routine]</A>
<A HREF="#SPP_FILE_RETRIEVE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  spp_data_product
  This basic object is the entry point for defining and obtaining all data for all data products
 $LastChangedBy: davin-mac $
 $LastChangedDate: 2020-10-28 14:02:27 -0700 (Wed, 28 Oct 2020) $
 $LastChangedRevision: 29305 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_data_product__define.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/spp_data_product__define.pro">projects/SPP/COMMON/spp_data_product__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FILE_RETRIEVE">
<H2>SPP_FILE_RETRIEVE</H2></A>
<A HREF="#SPP_DATA_PRODUCT__DEFINE">[Previous Routine]</A>
<A HREF="#SPP_FLD_LOAD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Written by Davin Larson

 $LastChangedBy: davin-mac $
 $LastChangedDate: 2020-04-28 16:55:34 -0700 (Tue, 28 Apr 2020) $
 $LastChangedRevision: 28618 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_file_retrieve.pro $

 Function:  files = spp_file_retrieve(PATHNAME)
 Purpose:  Retrieve or Download Solar Probe data files (i.e. L0 files)  (Can be used to generate filenames too)
 INPUT:
 PATHNAME:  string specifying relative path to files.         Default might change-  Currently:  'psp/pfp/l0/YYYY/MM/mvn_pfp_all_l0_YYYYMMDD_v???.dat'
         PATHNAME must be relative to the LOCAL_DATA_DIR and REMOTE_DATA_DIR fields of the source keyword.
         &quot;globbed&quot; filenames (*,?) are accepted.
 typical usage:
   files = spp_file_retrieve('psp/xxxxxx/YYYY/MM/mvn_pfp_all_l0_YYYYMMDD_v???.dat',/daily_names)   ; get L0 files for user defined time span
   files = spp_file_retrieve(pathname,/daily_names,trange=trange)  ; set time range
Keywords:  (All are optional - none are recommended)
 L0:   set to 1 to return PFP L0 files
 DAILY_NAMES : resolution (in days) for generating file names.
         YYYY, yy, MM, DD,  hh,  mm, ss, .f, DOY, DOW, TDIFF are special characters that will be substituted with the appropriate date/time field
         Be especially careful of extensions that begin with '.f' since these will be translated into a fractional second.
         See &quot;time_string&quot;  TFORMAT keyword for more info.
 TRANGE : two element vector containing start and end times (UNIX_TIME or UT string).  if not present then timerange() is called to obtain the limits.
 SOURCE:  alternate file source.   Default is whatever is return by the function:  mvn_file_source()    (see &quot;mvn_file_source&quot; for more info)
 FILES:  if provided these will be passed through as output.
 VALID_ONLY:  Set to 1 to prevent non existent files from being returned.
 CREATE_DIR:  Generates a filename and creates the directories needed to create the file without errors.  Will not check for file on remote server.

 KEYWORDS Passed on to &quot;FILE_RETRIEVE&quot;:
 LAST_VERSION : [0,1]  if set then only the last matching file is returned.  (Default is defined by source)
 VALID_ONLY:  [0,1]   If set then only existing files are returned.  (Default is defined by source keyword)
 VERBOSE:  set verbosity level (2 is typical)
 USER_PASS:  user:password combination for the remote server
 LIMITATIONS:
   Beware of file pathnames that include the character sequences:  YY,  MM, DD, hh, mm, ss, .f  since these can be retranslated to the time
</PRE><P>
<STRONG>(See <A href="COMMON/spp_file_retrieve.pro">projects/SPP/COMMON/spp_file_retrieve.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_FLD_LOAD">
<H2>SPP_FLD_LOAD</H2></A>
<A HREF="#SPP_FILE_RETRIEVE">[Previous Routine]</A>
<A HREF="#SPP_GEN_APDAT__DEFINE[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 PROCEDURE: SPP_FLD_LOAD

 PURPOSE:   Load data from the PSP/FIELDS instrument suite.

 KEYWORDS:

  Commonly used input keywords:

   LEVEL:          Specifies the level of FIELDS files to be loaded.
                   Level = 2 is the default value.

                   Level 2 and Level 3 data products from PSP/FIELDS are
                   public. This routine is also used by FIELDS SOC to load
                   the non-public Level 1 and Level 1b data files, which are
                   used for production of the Level 2s.

   NO_LOAD:        Don't load the CDF files (i.e., download only).

   NO_SERVER:      Disable contact with remote server. Can be used to load
                   files which are already downloaded on a local machine,
                   avoiding check for more recent files on the server.

   NO_STAGING:     Early in the PSP mission, some FIELDS CDF files were
                   stored in a '/staging/' directory on the server at
                   UCB/SSL. Setting this option points the load routine
                   away from these directories, which were retired in
                   mid-2020.

                   The wrapper routine PSP_FLD_LOAD sets NO_STAGING=1 by
                   default, and by the end of 2020 this will be the
                   default option for SPP_FLD_LOAD as well.

   TRANGE:         Two element vector indicating time range for loading data.
                   The format for TRANGE is the same as for the TPLOT routine.
                   If TIMESPAN procedure is used to set the desired time range
                   before SPP_FLD_LOAD is called, that time range is used by
                   default.

   TYPE:           String identifying the type of data to be loaded.
                   The default value is &quot;mag_SC_4_Sa_per_Cyc&quot;

   VARFORMAT:      Can be used to manually specify variables which will be
                   loaded from the CDF file. See CDF2TPLOT documentation
                   for details.

   VERSION:        Used to manually specify the version of FIELDS CDF that
                   will be searched for. By default, the routine will find
                   and load the most recent version.

  Commonly used output keywords:

   FILES:          Optional keyword output that will return the full file path
                   of files that are downloaded and loaded into TPLOT
                   variables by this routine.

   Other keywords:

   DOWNSAMPLE:     Used in FIELDS L1 -&gt; L2 data processing of downsampled
                   MAG data. No effect on L2/L3 data, or other (non-MAG)
                   L1 data.

   FILEPREFIX:     Manually set the subdirectory where this routine
                   will search for FIELDS data files.
                   Typically users do not need to change this from the default
                   value.

   GET_SUPPORT:    Load support data from the CDF file. See CDF2TPLOT
                   documentation for details.

   LONGTERM_EPHEM: Flag that can be set to load longterm (mission length)
                   ephemeris files. (These are Level 1 files, currently not
                   publicly available.)

   PATHFORMAT:     Can be used to manually set the format of the FIELDS
                   CDF filenames.
                   Typically users do not need to change this from the default
                   value.

   TNAME_PREFIX:   Can be set to add a string prefix in front of any TPLOT
                   variables created by this routine.

 EXAMPLE:

   IDL&gt; timespan, '2019-04-03', 4
   IDL&gt; spp_fld_load, type = 'mag_RTN_4_Sa_per_Cyc'

   For more examples, see SPP_FLD_EXAMPLES.

 CREATED BY:       Davin Larson December 2018
                   maintained by Marc Pulupa, 2019-2020

 $LastChangedBy: pulupalap $
 $LastChangedDate: 2021-03-04 23:08:15 -0800 (Thu, 04 Mar 2021) $
 $LastChangedRevision: 29739 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_fld_load.pro $

</PRE><P>
<STRONG>(See <A href="COMMON/spp_fld_load.pro">projects/SPP/COMMON/spp_fld_load.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_GEN_APDAT__DEFINE[1]">
<H2>SPP_GEN_APDAT__DEFINE[1]</H2></A>
<A HREF="#SPP_FLD_LOAD">[Previous Routine]</A>
<A HREF="#SPP_GEN_APDAT__DEFINE[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
  SPP_GEN_APDAT
  This basic object is the entry point for defining and obtaining all data for all apids
 $LastChangedBy: ali $
 $LastChangedDate: 2020-12-22 16:00:17 -0800 (Tue, 22 Dec 2020) $
 $LastChangedRevision: 29551 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_gen_apdat__define.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/spp_gen_apdat__define.pro">projects/SPP/COMMON/spp_gen_apdat__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_GEN_APDAT__DEFINE[2]">
<H2>SPP_GEN_APDAT__DEFINE[2]</H2></A>
<A HREF="#SPP_GEN_APDAT__DEFINE[1]">[Previous Routine]</A>
<A HREF="#SPP_PTP_RECORDER">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: MVN_SEP_SW_VERSION
Function: mvn_spice_kernels(name)
PURPOSE:
 Acts as a timestamp file to trigger the regeneration of SEP data products. Also provides Software Version info for the MAVEN SEP instrument.
Author: Davin Larson  - January 2014
 $LastChangedBy: ali $
 $LastChangedDate: 2020-12-22 16:00:17 -0800 (Tue, 22 Dec 2020) $
 $LastChangedRevision: 29551 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_gen_apdat__define.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/spp_gen_apdat__define.pro">projects/SPP/COMMON/spp_gen_apdat__define.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_PTP_RECORDER">
<H2>SPP_PTP_RECORDER</H2></A>
<A HREF="#SPP_GEN_APDAT__DEFINE[2]">[Previous Routine]</A>
<A HREF="#SPP_SPC_MET_TO_UNIXTIME">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
WIDGET Procedure:
  spp_ptp_recorder
PURPOSE:
 Widget tool that opens a socket and records streaming data from a server (host) and can save it to a file
 or send to a user specified routine. This tool runs in the background.
 Keywords:
   SET_FILE_TIMERES : defines how often the current output file will be closed and a new one will be opened
   DIRECTORY:  string prepended to fileformat when opening an output file.
 Author:
    Davin Larson - April 2011

 $LastChangedBy: davin-mac $
 $LastChangedDate: 2018-07-27 16:40:55 -0700 (Fri, 27 Jul 2018) $
 $LastChangedRevision: 25525 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_ptp_recorder.pro $

</PRE><P>
<STRONG>(See <A href="COMMON/spp_ptp_recorder.pro">projects/SPP/COMMON/spp_ptp_recorder.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SPP_SPC_MET_TO_UNIXTIME">
<H2>SPP_SPC_MET_TO_UNIXTIME</H2></A>
<A HREF="#SPP_PTP_RECORDER">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
Function:  spp_spc_met_to_unixtime
Purpose:  Convert MET (mission Elapsed Time) to Unix Time  (which is almost equivalent to UTC)
see also:  &quot;spp_spc_unixtime_to_met&quot; for the reverse conversion
 This routine is in the process of being modified to use SPICE Kernels to correct for clock drift as needed.
 Author: Davin Larson
 $LastChangedBy: ali $
 $LastChangedDate: 2021-03-09 19:26:00 -0800 (Tue, 09 Mar 2021) $
 $LastChangedRevision: 29749 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/COMMON/spp_spc_met_to_unixtime.pro $
</PRE><P>
<STRONG>(See <A href="COMMON/spp_spc_met_to_unixtime.pro">projects/SPP/COMMON/spp_spc_met_to_unixtime.pro</A>)</STRONG><P>
<HR>
 
